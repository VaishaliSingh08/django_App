{% load static %}

{% include 'home/header.html' %}
 <style>
    .formerror{
        color: crimson;
    }
</style>

<section class="login_part padding_top">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 col-md-6">
                <div class="login_part_text text-center">
                    <div class="login_part_text_iner">
                        <h2>Already having an account?</h2>
                        <p>There are advances bei                      ng made in science and technology
                            everyday, and a good example of this is the</p>
                        <a href="{% url "login" %}" class="btn_3">Login Now !!</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="login_part_form">
                    <div class="login_part_form_iner">
                        <h3>Welcome Back ! <br>
                            Please Sign in now</h3>
                      <form  enctype="multipart/form-data" name="myForm" onsubmit="return validateForm()" class="row contact_form" action="register" method="POST">

                                           {% csrf_token %}
                            {% if error_msg %}

                                <div class="col-md-12 form-group p_star alert-info" role="alert" style="color: red">
                                            {{ error_msg }}
                                </div>

                            {% endif %}
                        {% if success %}

                                <div class="col-md-12 form-group p_star alert-info" role="alert" style="color: green">
                                            {{ success }}
                                </div>

                            {% endif %}

                            <div class="col-md-12 form-group p_star">
                                <input class="form-control" id="name" type="text" value="{{ values.user_name }}" name="username"
                                       placeholder="Your Name" required/>
                               <b> <span class ="formerror"></span></b>
                            </div>
                            <div class="col-md-12 form-group p_star">
                                <input class="form-control" type="email" value="{{ values.user_email }}" name="email"
                                       placeholder="Your Email" required/>
                                 <i> <span id="email"  class ="formerror" ></span></i>
                            </div>
                            <div class="col-md-12 form-group p_star">
                                <input class="form-control" type="text" value="{{ values.user_contact }}"
                                       name="user_contact" maxlength="10" placeholder="Your Contact Number" required/>
                                <i><span id="contact" class ="formerror"></span></i>
                            </div>
                            <div class="col-md-12 form-group p_star">
                                <input class="form-control" type="text" value="{{ values.user_qualification }}"
                                       name="user_qualification" placeholder="Your Qualification"/>
                            </div>
                            <div class="col-md-12 form-group p_star">
                                <input class="form-control" type="password" name="password_one" placeholder="Password"
                                       required/>

                            </div>
                            <div class="col-md-12 form-group p_star">
                                <input class="form-control" type="password" name="password_two"
                                       placeholder="Repeat your password" required/>
                                <i><span id="passwrd" class ="formerror"></span></i>
                            </div>
                            <div class="col-md-12 form-group p_star">
                                <input class="form-control" type="file" name="user_image"
                                required/>
                            </div>

                                <button type="submit" value="Register" class="btn_3">
                                    Sign up
                                </button>

                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

{% include 'home/footer.html' %}


<script>

function seterror(id, error){

        element = document.getElementById(id).innerHTML = error;
    }

    function validateForm(){

        returnval = true;
        var contact = document.forms['myForm']['user_contact'].value;
        if(contact.length < 10) {
            seterror('contact', '*Please enter 10 digits valid contact number');
            returnval = false;
        }
        var email = document.forms['myForm']['email'].value;
        atpos = email.indexOf("@");
        dotpos = email.lastIndexOf(".");

         if (atpos < 1 || ( dotpos - atpos < 2 )) {
             seterror('email', 'Please enter a valid email');
             returnval = false;
         }

        var firstpassword= document.forms['myForm']['password_one'].value;
        var secondpassword=document.forms['myForm']['password_two'].value;

        if(firstpassword !== secondpassword){
            console.log(firstpassword, secondpassword)
            seterror('passwrd', 'Passwords not matching !!');
            returnval = false;
        }

        return  returnval;
    }
</script>
